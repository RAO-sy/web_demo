{"ast":null,"code":"import _objectSpread from \"E:/code/Web/detect-demo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"E:/code/Web/detect-demo/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"E:/code/Web/detect-demo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n/*\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2022-04-28 10:25:38\r\n */\nimport axios from 'axios';\nimport UtilVar from \"@/config/UtilVar\";\nimport router from '@/router';\nvar baseUrl = UtilVar.baseUrl;\nvar CancelToken = axios.CancelToken;\nexport { baseUrl };\n// axios.defaults.withCredentials = true;\n// 添加请求拦截器\naxios.interceptors.request.use(function (config) {\n  // 在发送请求之前做些什么 传token\n  var token = localStorage.getItem(\"token\");\n  config.headers.common['Content-Type'] = \"application/json;charset=utf-8\";\n  config.headers.common['token'] = token; //Authorization\n  return config;\n}, function (error) {\n  // 对请求错误做些什么\n  console.log(error);\n  return Promise.reject(error);\n});\n/**\r\n * @响应拦截\r\n */\naxios.interceptors.response.use(function (response) {\n  if (response.status !== 200) {\n    return Promise.reject(response);\n  }\n  /**\r\n  * @code 登录过期 token验证失败 根据后端调 \r\n  */\n  if (response.data.code == UtilVar.code) {\n    // router.push(\"/login\")\n  }\n  return response.data;\n}, function (error) {\n  // console.log('axiosError',error);\n  var err = {\n    success: false,\n    msg: \"未知异常，请联系管理员！\"\n  };\n  return Promise.reject(err);\n});\nvar configs_ENC = {\n  headers: {\n    'enc': UtilVar.ENC\n  }\n};\n//处理是否加密数据\nvar isEncryptionParam = function isEncryptionParam(params) {\n  return params;\n};\nexport var GET = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(url, params) {\n    var data;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          params = isEncryptionParam(params);\n          _context.next = 4;\n          return axios.get(\"\".concat(baseUrl).concat(url), {\n            params: params,\n            headers: configs_ENC.headers\n          }, configs_ENC);\n        case 4:\n          data = _context.sent;\n          return _context.abrupt(\"return\", data);\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](0);\n          return _context.abrupt(\"return\", _context.t0);\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n  return function GET(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n//没有基地址 访问根目录下文件\n\nexport var GETNOBASE = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url, params) {\n    var data;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return axios.get(url, {\n            params: params\n          });\n        case 3:\n          data = _context2.sent;\n          return _context2.abrupt(\"return\", data);\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n          return _context2.abrupt(\"return\", _context2.t0);\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n  return function GETNOBASE(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var POST = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(url, params) {\n    var data;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          params = isEncryptionParam(params);\n          _context3.next = 4;\n          return axios.post(\"\".concat(baseUrl).concat(url), params, configs_ENC);\n        case 4:\n          data = _context3.sent;\n          return _context3.abrupt(\"return\", data);\n        case 8:\n          _context3.prev = 8;\n          _context3.t0 = _context3[\"catch\"](0);\n          return _context3.abrupt(\"return\", _context3.t0);\n        case 11:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 8]]);\n  }));\n  return function POST(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var PUT = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(url, params) {\n    var data;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          params = isEncryptionParam(params);\n          _context4.next = 4;\n          return axios.put(\"\".concat(baseUrl).concat(url), params, configs_ENC);\n        case 4:\n          data = _context4.sent;\n          return _context4.abrupt(\"return\", data);\n        case 8:\n          _context4.prev = 8;\n          _context4.t0 = _context4[\"catch\"](0);\n          return _context4.abrupt(\"return\", _context4.t0);\n        case 11:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 8]]);\n  }));\n  return function PUT(_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var DELETE = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(url, params) {\n    var data;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          params = isEncryptionParam(params);\n          _context5.next = 4;\n          return axios[\"delete\"](\"\".concat(baseUrl).concat(url), {\n            data: params,\n            headers: configs_ENC.headers\n          }, configs_ENC);\n        case 4:\n          data = _context5.sent;\n          return _context5.abrupt(\"return\", data);\n        case 8:\n          _context5.prev = 8;\n          _context5.t0 = _context5[\"catch\"](0);\n          return _context5.abrupt(\"return\", _context5.t0);\n        case 11:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 8]]);\n  }));\n  return function DELETE(_x9, _x10) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\n/**\r\n * @文件类型提交方法\r\n */\nvar configs = {\n  headers: {\n    'Content-Type': 'multipart/form-data'\n  }\n};\nexport var FILESubmit = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(url, params, config) {\n    var data;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _context6.next = 3;\n          return axios.post(\"\".concat(baseUrl).concat(url), params, _objectSpread(_objectSpread({}, configs), {}, {\n            cancelToken: new CancelToken(function executor(c) {\n              config.setCancel && config.setCancel(c);\n            }),\n            onUploadProgress: function onUploadProgress(e) {\n              if (e.total > 0) {\n                e.percent = e.loaded / e.total * 100;\n              }\n              // console.log(config)\n              config.onProgress && config.onProgress(e);\n            }\n          }));\n        case 3:\n          data = _context6.sent;\n          return _context6.abrupt(\"return\", data);\n        case 7:\n          _context6.prev = 7;\n          _context6.t0 = _context6[\"catch\"](0);\n          return _context6.abrupt(\"return\", _context6.t0);\n        case 10:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 7]]);\n  }));\n  return function FILESubmit(_x11, _x12, _x13) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\n/**\r\n * 下载文档流\r\n * @param {config.responseType} 下载文件流根据后端 配置   arraybuffer || blod\r\n */\nexport var FILE = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n    var config,\n      body,\n      params,\n      data,\n      _args7 = arguments;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          config = _args7.length > 0 && _args7[0] !== undefined ? _args7[0] : {};\n          body = _args7.length > 1 ? _args7[1] : undefined;\n          params = _args7.length > 2 ? _args7[2] : undefined;\n          _context7.prev = 3;\n          _context7.next = 6;\n          return axios({\n            method: config.method || 'get',\n            url: \"\".concat(baseUrl).concat(config.url),\n            data: body,\n            params: params,\n            responseType: config.responseType || 'blob',\n            onDownloadProgress: function onDownloadProgress(e) {\n              // console.log(e,e.currentTarget)\n              // if (e.currentTarget.response.size > 0) {\n              //     e.percent = e.loaded / e.currentTarget.response.size * 100;\n              // }\n              // event.srcElement.getResponseHeader('content-length')\n              config.onProgress && config.onProgress(e);\n            }\n          });\n        case 6:\n          data = _context7.sent;\n          return _context7.abrupt(\"return\", data);\n        case 10:\n          _context7.prev = 10;\n          _context7.t0 = _context7[\"catch\"](3);\n          return _context7.abrupt(\"return\", _context7.t0);\n        case 13:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[3, 10]]);\n  }));\n  return function FILE() {\n    return _ref7.apply(this, arguments);\n  };\n}();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}